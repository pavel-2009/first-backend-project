{% load user_filters %}
{% load thumbnail %}
{% if post.image %}
    {% thumbnail post.image "960x339" crop="center" upscale=True as im %}
        <img class="card-img my-2" src="{{ im.url }}">
    {% endthumbnail %}
{% endif %}
<div class="card mb-4 shadow-sm rounded-4 border-0">
    <div class="card-body">
        <h5 class="card-title mb-2">
            <a href="{{ post.get_absolute_url }}" class="text-decoration-none text-dark fw-semibold">{{ post.text|truncatechars:50 }}</a>
        </h5>
        <div class="d-flex flex-wrap align-items-center mb-2 gap-2">
            <small class="text-muted">Автор: <a href="{% url 'profile' post.author.username %}" class="text-primary text-decoration-none">{{ post.author.get_full_name|default:post.author.username }}</a></small>
            {% if post.group %}
                <small class="text-muted">| Группа: <a href="{% url 'group_list' post.group.slug %}" class="text-success text-decoration-none">{{ post.group.title }}</a></small>
            {% endif %}
        </div>
        {% if post.image %}
            <img src="{{ post.image.url }}" class="img-fluid rounded-3 mb-2 border" alt="Post image">
        {% endif %}
        <p class="card-text"><span class="badge bg-light text-secondary">{{ post.pub_date|date:"d E Y H:i" }}</span></p>
    </div>
</div>
<article>
    <ul style="list-style-type: none; padding: 10px; margin-left: 35px; margin-right: 35px; box-sizing: border-box;">
        <li>
            <span style='text-transform: uppercase; font-weight: bold'>Автор</span>: <a href="{% url 'posts:profile' username=post.author %}">{{post.author}}</a>
        </li>
        <li>
            Дата публикации: {{post.pub_date}}
        </li>
        {% if user == post.author %}
        <li>
            <a href="{% url 'posts:post_edit' post_id=post.id %}">Редактировать</a>
        </li>
        {% endif %}
    </ul>           
</article>